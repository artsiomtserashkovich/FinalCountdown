@using PrintingMonitor.Printer.Queries;

@inject ICameraCaptureQuery CameraCaptureQuery

<Tile Title="Camera" SizeClasses="col-xl-4 col-md-6 mb-4 h-75">
    <img src="@_imageSource" class="img-fluid rounded mx-auto d-block" alt="Stream" />
</Tile>

@code {
    private string _imageSource;

    protected override void OnAfterRender(bool firstRender)
    {
        while (true)
        {
            var base64 = CameraCaptureQuery.GetBase64Capture();
            _imageSource = $"data:image/gif;base64,{base64}";

            Task.Delay(300).Wait();

            StateHasChanged();
        }
    }
}